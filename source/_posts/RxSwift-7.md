---
title: RxSwift (7)
subtitle: Throttle vs Debounce
date: 2019-05-24 21:43:36
tags: ["throttle", "debounce"]
category: ["RxSwift"]
---

## Throttle vs Debounce

오늘은 RxSwift를 공부하며 마주했던 연산자(Operator)인 `throttle`과 `debounce`에 대해 알아보려 한다. 

이 둘 중 먼저 접하게 된 연산자는 `debounce`로 `UISearchBar`에 입력되는 내용으로 네트워크 호출을 할 때 사용했다. 그 이유는 동일한 네트워크 호출의 지속적인 반복을 방지하고자 하는 목적이었다. 

좀 더 자세히 상황을 들여다보면 사용자가 입력을 하고 특정 버튼을 누를 필요 없이 바로 네트워크 호출이 진행되는 상황이다. 그렇다면 사용자가 타이핑을 할 때마다 네트워크 호출이 진행될 것이다. 이를 방지하고자 사용자가 입력을 잠깐 멈추었을 때 비로소 네트워크 호출을 하기 위해 `debounce`를 사용했다. 



### Debounce

------

`debounce`는 **이벤트 발생 후 주어진 시간 후에 해당 이벤트를 흘려보낸다**. 그리고 이벤트가 **발생할 때마다 타이머는 초기화**된다. 

자. 그럼 이제 위의 예제에서 `debounce`를 사용한 이유가 이해가 될 것이다. 타이핑이 끝난 후 현재 `UISearchBar`에 쌓여있는 텍스트를 기반으로 네트워크 호출을 한다.

> 여기에 `distinctUntilChanged()`을 함께 사용하면 네트워크 호출 부담을 보다 줄일 수 있다. 이에 대해서는 추후에 포스팅으로 다룰 예정이다.

이를 가장 잘 나타낸 다이어그램이다. 

![](https://camo.qiitausercontent.com/acd6568689e10d8ee3f30d0aa01d55fb5dd94303/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34383937312f33623430343731622d623663332d363635382d623965312d6335656330313164333335302e706e67)

이벤트1,2는 이벤트 2, 3에 의해 타이머가 초기화된다. 이벤트 3은 발생 후 x초 동안 어느 이벤트도 발생하지 않았기 때문에 타이머가 초기화되지 않고 x초 후에 내려온다. 

이벤트 4,5 그리고 이벤트 6도 마찬가지다. 

### Throttle 

------

`throttle`도 시간을 넣어주는데 `debounce`와의 차이점은 무엇일까?

`throttle`은 이벤트가 발생하면 해당 이벤트를 흘려보내고, 이후 주어진 시간 동안의 다른 이벤트들은 무시하고 해당 시간이 흐른 후 무시된 이벤트들 중 가장 최신의 이벤트를 흘려보낸다.

역시 다이어그램을 통해 살펴보자. 

![](https://camo.qiitausercontent.com/28abb126b6b5e3c4def98929f72d0d0675f61a1a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34383937312f34666431353064392d303463302d616539312d303066372d3264383837623761646562372e706e67)

이벤트 1이 발생하고 x 초가 흐른 후 가장 최신 이벤트는 이벤트 3이므로 이벤트 3을 흘려보낸다.



### 마무리

------

오늘은 이렇게 간단히 시간과 관련된 연산자인 `debounce`와 `throttle`에 대해 간단히 알아보았다. RxSwift는 확실히 눈으로 보는 것보다 코드로 작성하고 마블 다이어그램을 보아야 더욱 잘 이해할 수 있는 것 같다. 